# Supabase Configuration (automatically populated when you connected)
VITE_SUPABASE_URL=https://darjwmlcicbrqrmzadxe.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_URL=https://darjwmlcicbrqrmzadxe.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRhcmp3bWxjaWNicnFybXphZHhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5ODM5NTcsImV4cCI6MjA3MDU1OTk1N30._NkoOaZcQvDjvctjMd32A9m_0sNRcR4LWQsMqQHLTnQ
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRhcmp3bWxjaWNicnFybXphZHhlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDk4Mzk1NywiZXhwIjoyMDcwNTU5OTU3fQ.VJo349Sd7uF0bKoEGoeRFg2fD4XByNH-V6UPXcH3O3Y

# Google Gemini AI Configuration (REQUIRED for AI features)
LLM_API_KEY=yAIzaSyC3U6p-2u1syRLM7N0FkDM3fAhrEhWlM34
LLM_MODEL=gemini-1.5-flash
LLM_MAX_TOKENS=800
# Hard cap (safety)
LLM_MAX_TOKENS_CAP=2048

# AI Details Mode: bullets | narrative
AI_DETAILS_MODE=bullets

# Logging
LLM_LOG_ENABLED=true
LLM_LOG_DIR=llm-logs
RSS_LOG_ENABLED=true
RSS_LOG_DIR=rss-logs
RSS_LOG_MAX_BYTES=300000
FULLTEXT_LOG_PREVIEW=true
FULLTEXT_LOG_PREVIEW_CHARS=400

# Server Configuration
PORT=3000
NODE_ENV=development
LOG_LEVEL=info

# Feed Crawling Configuration
FEED_USER_AGENT=InsightFeeder/1.0
FETCH_TIMEOUT_MS=15000
MAX_ITEMS_PER_RUN=500

# Optional: Authentication token for API protection
EDGE_TOKEN=

# Optional: CORS configuration
ALLOWED_ORIGINS=*

# Feature Flags
ENABLE_HTML_EXTRACTION=false
ENABLE_VECTOR_EMBEDDINGS=false

# Pretranslation (recommended defaults)
PRETRANS_CONCURRENCY=6
PRETRANS_ITEM_TIMEOUT_MS=8000
PRETRANS_RECENT_HOURS=24
PRETRANS_MAX_CLUSTERS=200

# Clustering (flags and thresholds)
CLUSTERING_ENABLED=true
CLUSTER_TRGM_THRESHOLD=0.55
CLUSTER_TRGM_WINDOW_HOURS=72
CLUSTER_TRGM_LIMIT=10

# Cluster enrichment
CLUSTER_ENRICH_ENABLED=false
CLUSTER_LLM_ENABLED=false
CLUSTER_LANG=en
CLUSTER_LLM_SLEEP_MS=250

# Cluster timeline update extraction
# Gate heuristic rules (generic, coarse). Default false to avoid surprises.
CLUSTER_UPDATE_RULES_ENABLED=false
# Stance classification mode: off | llm
CLUSTER_UPDATE_STANCE_MODE=off
# Token cap for LLM stance classifier
CLUSTER_UPDATE_STANCE_LLM_TOKENS=120

# Media (Phase 1: publisher images via HTML meta)
# Set MEDIA_ENABLED=true to enable attaching images to new articles.
MEDIA_ENABLED=true
# Extract from OpenGraph/Twitter/JSON-LD meta tags on the article page
MEDIA_FROM_HTML_META=true
# Prefer RSS media tags/enclosures when present
MEDIA_FROM_RSS=true
# Optionally verify image Content-Type with HTTP HEAD (extra network calls)
MEDIA_VERIFY_HEAD=false
# Minimum width for images to accept (0 to disable)
MEDIA_MIN_WIDTH=800
# Comma-separated aspect ratios to accept (leave empty to allow any)
MEDIA_ACCEPTED_ASPECTS=16:9,4:3
# Storage mirroring (Phase 2)
MEDIA_STORAGE_ENABLED=true
MEDIA_STORAGE_BUCKET=news-media
MEDIA_MAX_DOWNLOAD_BYTES=3000000

# OG-card fallback (Phase 3)
MEDIA_FALLBACK_OGCARD_ENABLED=true
# Stock fallback (optional)
MEDIA_STOCK_ENABLED=false
# Path to JSON file with matchers and default pool
STOCK_CONFIG_PATH=./stock-config.json

# Policy defaults
MEDIA_MIRROR_DEFAULT_ALLOW=false
OGCARD_WIDTH=1200
OGCARD_HEIGHT=630
OGCARD_BG=#0F172A
OGCARD_FG=#FFFFFF
OGCARD_ACCENT=#38BDF8

# AI illustration fallback (optional)
# Only used when no publisher/RSS/stock image is available and storage is enabled.
MEDIA_AI_ENABLED=false
# Comma-separated list of categories where AI illustrations are allowed.
# Empty = allow all; recommended: generic categories only.
MEDIA_AI_ALLOWED_CATEGORIES=general,business,technology,science,health,weather,opinion,education,finance
# Provider and output size (currently only svg abstract generator supported)
AI_IMAGE_PROVIDER=svg
AI_IMAGE_WIDTH=1200
AI_IMAGE_HEIGHT=630